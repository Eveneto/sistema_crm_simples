version: '3.8'

services:
  evolution_api:
    image: atendai/evolution-api:latest
    container_name: evolution_api
    restart: always
    ports:
      - "8080:8080"
    environment:
      # Autenticação
      AUTHENTICATION_API_KEY: "mude-me"
      
      # Database (usa SQLite por padrão, arquivo persistente)
      DATABASE_PROVIDER: "better-sqlite"
      DATABASE_CONNECTION_URI: "database.db"
      
      # Server
      SERVER_URL: "http://localhost:8080"
      SERVER_PORT: "8080"
      
      # Logs
      LOG_LEVEL: "info"
    volumes:
      - ./evolution_data:/app/database
      - ./evolution_sessions:/app/sessions
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  evolution_data:
  evolution_sessions:
